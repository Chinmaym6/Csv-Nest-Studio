{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api';import'./Notifications.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function Notifications(){const[requests,setRequests]=useState([]);const[notes,setNotes]=useState([]);const[open,setOpen]=useState(false);const load=async()=>{const[reqRes,noteRes]=await Promise.all([api.get('/collaboration_requests'),api.get('/notifications')]);setRequests(reqRes.data);setNotes(noteRes.data);};useEffect(()=>{load();},[]);const accept=async id=>{await api.post(`/collaboration_requests/${id}/accept`);load();};const reject=async id=>{await api.post(`/collaboration_requests/${id}/reject`);load();};const markRead=async nid=>{await api.post(`/notifications/${nid}/read`);};const count=requests.length+notes.filter(n=>!n.is_read).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"notif-wrapper\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"notif-btn\",onClick:()=>setOpen(o=>!o),children:[\"\\uD83D\\uDD14 \",count]}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"notif-dropdown\",children:[requests.map(r=>/*#__PURE__*/_jsxs(\"div\",{className:\"notif-item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:r.from_user}),\" wants to collaborate on \\\"\",r.filename,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>accept(r.id),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>reject(r.id),children:\"Reject\"})]})]},r.id)),notes.map(n=>/*#__PURE__*/_jsxs(\"div\",{className:\"notif-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:n.message}),!n.is_read&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{markRead(n.id);},children:\"Mark read\"})]},n.id)),count===0&&/*#__PURE__*/_jsx(\"div\",{className:\"notif-item\",children:\"No notifications\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsxs","_jsxs","jsx","_jsx","Notifications","requests","setRequests","notes","setNotes","open","setOpen","load","reqRes","noteRes","Promise","all","get","data","accept","id","post","reject","markRead","nid","count","length","filter","n","is_read","className","children","onClick","o","map","r","from_user","filename","message"],"sources":["C:/Users/91767/Desktop/csv-file-manager/frontend/src/components/Notifications.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api';\r\nimport './Notifications.css';\r\n\r\nexport default function Notifications() {\r\n  const [requests, setRequests] = useState([]);\r\n  const [notes, setNotes]       = useState([]);\r\n  const [open, setOpen]         = useState(false);\r\n\r\n  const load = async () => {\r\n    const [reqRes, noteRes] = await Promise.all([\r\n      api.get('/collaboration_requests'),\r\n      api.get('/notifications'),\r\n    ]);\r\n    setRequests(reqRes.data);\r\n    setNotes(noteRes.data);\r\n  };\r\n\r\n  useEffect(() => { load(); }, []);\r\n\r\n  const accept = async id => { await api.post(`/collaboration_requests/${id}/accept`); load(); };\r\n  const reject = async id => {  await api.post(`/collaboration_requests/${id}/reject`); load(); };\r\n  const markRead = async nid => {  await api.post(`/notifications/${nid}/read`);};\r\n\r\n  const count = requests.length + notes.filter(n => !n.is_read).length;\r\n\r\n  return (\r\n    <div className=\"notif-wrapper\">\r\n      <button className=\"notif-btn\" onClick={() => setOpen(o => !o)}>\r\n        ðŸ”” {count}\r\n      </button>\r\n      {open && (\r\n        <div className=\"notif-dropdown\">\r\n          {requests.map(r => (\r\n            <div key={r.id} className=\"notif-item\">\r\n              <span>\r\n                <strong>{r.from_user}</strong> wants to collaborate on \"{r.filename}\"\r\n              </span>\r\n              <div>\r\n                <button onClick={() => accept(r.id)}>Accept</button>\r\n                <button onClick={() => reject(r.id)}>Reject</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {notes.map(n => (\r\n            <div key={n.id} className=\"notif-item\">\r\n              <span>{n.message}</span>\r\n              {!n.is_read && (\r\n                <button onClick={() => { markRead(n.id); }}>Mark read</button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          {count === 0 && <div className=\"notif-item\">No notifications</div>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
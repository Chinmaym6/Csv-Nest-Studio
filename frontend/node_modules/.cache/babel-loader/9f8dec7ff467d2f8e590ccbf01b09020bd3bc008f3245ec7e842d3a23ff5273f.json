{"ast":null,"code":"import{useState,useCallback}from'react';export default function useUndoable(initial){const[history,setHistory]=useState({past:[],present:initial,future:[]});const{past,present,future}=history;//  set is used to update the present state and store the old state into past.\nconst set=useCallback(updater=>{setHistory(h=>{const next=typeof updater==='function'?updater(h.present):updater;if(next===h.present)return h;return{past:[...h.past,h.present],present:next,future:[]};});},[]);const undo=useCallback(()=>{setHistory(h=>{if(h.past.length===0)return h;const previous=h.past[h.past.length-1];return{past:h.past.slice(0,-1),present:previous,future:[h.present,...h.future]};});},[]);const redo=useCallback(()=>{setHistory(h=>{if(h.future.length===0)return h;const next=h.future[0];return{past:[...h.past,h.present],present:next,future:h.future.slice(1)};});},[]);const reset=useCallback(state=>{setHistory({past:[],present:state,future:[]});},[]);return{present,set,undo,redo,reset,canUndo:past.length>0,canRedo:future.length>0};}","map":{"version":3,"names":["useState","useCallback","useUndoable","initial","history","setHistory","past","present","future","set","updater","h","next","undo","length","previous","slice","redo","reset","state","canUndo","canRedo"],"sources":["C:/Users/91767/Desktop/csv-file-manager/frontend/src/contexts/useUndoable.jsx"],"sourcesContent":["import { useState, useCallback } from 'react';\r\n\r\nexport default function useUndoable(initial) {\r\n  const [history, setHistory] = useState({\r\n    past: [],\r\n    present: initial,\r\n    future: []\r\n  });\r\n\r\n  const { past, present, future } = history;\r\n//  set is used to update the present state and store the old state into past.\r\n  const set = useCallback(updater => {\r\n    setHistory(h => {\r\n      const next =\r\n        typeof updater === 'function'\r\n          ? updater(h.present)\r\n          : updater;\r\n      if (next === h.present) return h;\r\n      return {\r\n        past: [...h.past, h.present],\r\n        present: next,\r\n        future: []\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const undo = useCallback(() => {\r\n    setHistory(h => {\r\n      if (h.past.length === 0) return h;\r\n      const previous = h.past[h.past.length - 1];\r\n      return {\r\n        past: h.past.slice(0, -1),\r\n        present: previous,\r\n        future: [h.present, ...h.future]\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const redo = useCallback(() => {\r\n    setHistory(h => {\r\n      if (h.future.length === 0) return h;\r\n      const next = h.future[0];\r\n      return {\r\n        past: [...h.past, h.present],\r\n        present: next,\r\n        future: h.future.slice(1)\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  const reset = useCallback(state => {\r\n    setHistory({ past: [], present: state, future: [] });\r\n  }, []);\r\n\r\n  return {\r\n    present,\r\n    set,\r\n    undo,\r\n    redo,\r\n    reset,\r\n    canUndo: past.length > 0,\r\n    canRedo: future.length > 0\r\n  };\r\n}"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAE7C,cAAe,SAAS,CAAAC,WAAWA,CAACC,OAAO,CAAE,CAC3C,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGL,QAAQ,CAAC,CACrCM,IAAI,CAAE,EAAE,CACRC,OAAO,CAAEJ,OAAO,CAChBK,MAAM,CAAE,EACV,CAAC,CAAC,CAEF,KAAM,CAAEF,IAAI,CAAEC,OAAO,CAAEC,MAAO,CAAC,CAAGJ,OAAO,CAC3C;AACE,KAAM,CAAAK,GAAG,CAAGR,WAAW,CAACS,OAAO,EAAI,CACjCL,UAAU,CAACM,CAAC,EAAI,CACd,KAAM,CAAAC,IAAI,CACR,MAAO,CAAAF,OAAO,GAAK,UAAU,CACzBA,OAAO,CAACC,CAAC,CAACJ,OAAO,CAAC,CAClBG,OAAO,CACb,GAAIE,IAAI,GAAKD,CAAC,CAACJ,OAAO,CAAE,MAAO,CAAAI,CAAC,CAChC,MAAO,CACLL,IAAI,CAAE,CAAC,GAAGK,CAAC,CAACL,IAAI,CAAEK,CAAC,CAACJ,OAAO,CAAC,CAC5BA,OAAO,CAAEK,IAAI,CACbJ,MAAM,CAAE,EACV,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,IAAI,CAAGZ,WAAW,CAAC,IAAM,CAC7BI,UAAU,CAACM,CAAC,EAAI,CACd,GAAIA,CAAC,CAACL,IAAI,CAACQ,MAAM,GAAK,CAAC,CAAE,MAAO,CAAAH,CAAC,CACjC,KAAM,CAAAI,QAAQ,CAAGJ,CAAC,CAACL,IAAI,CAACK,CAAC,CAACL,IAAI,CAACQ,MAAM,CAAG,CAAC,CAAC,CAC1C,MAAO,CACLR,IAAI,CAAEK,CAAC,CAACL,IAAI,CAACU,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CACzBT,OAAO,CAAEQ,QAAQ,CACjBP,MAAM,CAAE,CAACG,CAAC,CAACJ,OAAO,CAAE,GAAGI,CAAC,CAACH,MAAM,CACjC,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,IAAI,CAAGhB,WAAW,CAAC,IAAM,CAC7BI,UAAU,CAACM,CAAC,EAAI,CACd,GAAIA,CAAC,CAACH,MAAM,CAACM,MAAM,GAAK,CAAC,CAAE,MAAO,CAAAH,CAAC,CACnC,KAAM,CAAAC,IAAI,CAAGD,CAAC,CAACH,MAAM,CAAC,CAAC,CAAC,CACxB,MAAO,CACLF,IAAI,CAAE,CAAC,GAAGK,CAAC,CAACL,IAAI,CAAEK,CAAC,CAACJ,OAAO,CAAC,CAC5BA,OAAO,CAAEK,IAAI,CACbJ,MAAM,CAAEG,CAAC,CAACH,MAAM,CAACQ,KAAK,CAAC,CAAC,CAC1B,CAAC,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,KAAK,CAAGjB,WAAW,CAACkB,KAAK,EAAI,CACjCd,UAAU,CAAC,CAAEC,IAAI,CAAE,EAAE,CAAEC,OAAO,CAAEY,KAAK,CAAEX,MAAM,CAAE,EAAG,CAAC,CAAC,CACtD,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLD,OAAO,CACPE,GAAG,CACHI,IAAI,CACJI,IAAI,CACJC,KAAK,CACLE,OAAO,CAAEd,IAAI,CAACQ,MAAM,CAAG,CAAC,CACxBO,OAAO,CAAEb,MAAM,CAACM,MAAM,CAAG,CAC3B,CAAC,CACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}